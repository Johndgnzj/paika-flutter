# 📋 Paika Phase 2 開發清單

## 🎯 v1.1.0 - 核心功能完善

### 高優先級
- [x] **一炮多響完整實作** ✅ 2026-02-09 - 多人同時胡牌功能
  - [x] 選擇多位贏家
  - [x] 各自輸入台數和花牌
  - [x] 計算分數分配
  - [x] 介面優化

- [x] **換位置功能優化** ✅ 2026-02-09 - 拖曳或選單交換玩家位置
  - [x] UI 設計
  - [x] 點擊交換實作
  - [x] 位置交換邏輯
  - [x] 確認對話框

- [x] **流局處理（完整版）** ✅ 2026-02-09 - 區分聽牌與未聽牌
  - [x] 選擇聽牌玩家
  - [x] 計算聽牌獎金
  - [x] 未聽牌扣款
  - [x] 莊家連莊處理

### 中優先級
- [x] **歷史紀錄詳細頁面** ✅ 2026-02-09 - 查看單一牌局完整資訊
  - [x] 每局詳細記錄
  - [x] 最終排名顯示
  - [x] 勝負統計
  - [ ] 分享功能（移至 v2.1.0）

- [x] **動畫效果** ✅ 2026-02-09 - 提升使用體驗
  - [x] 分數變化動畫
  - [x] 頁面切換動畫
  - [x] 按鈕回饋動畫
  - [x] 骰子滾動動畫

### 低優先級
- [x] **設定頁面** ✅ 2026-02-09 - 遊戲規則自訂
  - [x] 自摸是否加台
  - [x] 詐胡賠付規則
  - [x] 音效開關（UI 已建立，待音效系統實作）
  - [x] 深色模式偏好

## 🎯 v2.0.0 - 用戶歷程 ✅ 完成
> 詳見 [V2_TODO.md](./V2_TODO.md)

- [x] **帳號系統** ✅ - 註冊/登入/登出、資料帳號隔離
- [x] **玩家登錄** ✅ - PlayerProfile CRUD、開局時選擇已登錄玩家
- [x] **玩家連結** ✅ - 連結碼機制、跨帳號牌局查詢
- [x] **玩家統計頁面** ✅ - 戰績概覽、對手分析、近期牌局
- [x] **圖表視覺化** ✅ - 分數趨勢圖、勝率圓餅圖、台數分布圖

## 🎯 v3.0.0 - 雲端同步與資料管理
> 詳見 [V3_PLAN.md](./V3_PLAN.md)

- [ ] **Firebase 雲端同步** - 資料雲端化
  - [ ] Firebase Anonymous Auth（靜默安全層）
  - [ ] Firestore Security Rules + App Check
  - [ ] FirestoreService（CRUD）
  - [ ] StorageService Write-Through 重構
  - [ ] 本地資料遷移到 Firestore
  - [ ] 離線支援（Firestore 離線快取）

- [ ] **多場次管理** - 管理多個牌局
  - [ ] 牌局列表搜尋
  - [ ] 刪除牌局
  - [ ] 重命名牌局

- [ ] **匯出報表** - 資料匯出功能
  - [ ] 匯出為 JSON
  - [ ] 匯出為 CSV
  - [ ] 匯出為 PDF

## 🎯 v3.1.0 - 發佈上線
- [ ] **調整介面**
  - [ ] 調整深色/淺色模式的色調
  - [ ] 更換 Logo
  - [ ] 在設定頁加上使用條款、隱私權政策說明
  - [ ] 在設定頁加上使用手冊

- [ ] **iOS/Android App** - 原生 App
  - [ ] 編譯 APK
  - [ ] 上架 Google Play
  - [ ] 編譯 iOS
  - [ ] 上架 App Store

## 🎯 v3.0.0 - 統計與分析
- [ ] **玩家統計增強**
  - [ ] 最高單局記錄高亮顯示
  - [ ] 統計數據時間範圍篩選（近一週/一月/全部）

## 🎯 v3.1.0 - 體驗優化

### 從 v1.1.0 遺留
- [ ] **分享功能** - 歷史紀錄分享
  - [ ] 牌局結果分享（圖片或文字）

- [ ] **音效** - 操作回饋聲音
  - [ ] 胡牌音效
  - [ ] 詐胡音效
  - [ ] 骰子音效
  - [ ] 按鈕點擊音效

- [ ] **帳號功能增強**
  - [ ] 忘記密碼流程（本地提示或重設）
  - [ ] 帳號資料匯出/匯入

## 🐛 Bug 修復與優化

- [x] 橫向模式優化 ✅ 2026-02-09
- [x] 效能優化 ✅ 2026-02-09
- [x] 錯誤處理改善 ✅ 2026-02-09
- [x] Loading 狀態顯示 ✅ 2026-02-09
- [x] 應用程式的名稱是「牌咖」 ✅ 2026-02-09
- [x] 整體字型加大 ✅ 2026-02-09
- [x] 莊家不要用紅點，改成底色不同 ✅ 2026-02-09
- [x] 莊家連莊的字體加大 ✅ 2026-02-09
- [x] 把流局按鈕移到即時計分畫面的中間 ✅ 2026-02-09
- [x] 牌局的計算不要用一二三四，改成圈+風，例如第一圈的第一場就是東風東局，第二圈的第三場是南風西局，以此類推，牌局詳情的局數詳情也適用 ✅ 2026-02-09
- [x] 牌局詳情的局數詳情的每一列改成五欄，第一欄顯示局與結果，接著四欄直接顯示這一局的分數增減，在最開頭加上對應的玩家，排序方式改成以時間降幕排序 ✅ 2026-02-09
- [x] 流局不需要選擇任何東西，就直接流局 ✅ 2026-02-09
- [x] 把一炮多響和骰子一起放到中間的位置 ✅ 2026-02-09
- [x] 即時分數頁要能夠指定莊家 ✅ 2026-02-09（已有 SetDealerDialog，包含重置連莊數和重新計算圈風選項）
- [x] 糊牌預設台數為0 ✅ 2026-02-09
- [x] 新局設定頁加上：自動計算莊家台數開關、自動計算連莊台數開關 ✅ 2026-02-09
- [x] 調整即時分數頁的佈局 ✅ 2026-02-09（中央快速按鈕已實作）
- [x] 調整指定莊家的view，如果選擇了重新計算風和圈，那麼莊家就是東
- [x] 調整即時分數頁的佈局：快速功能改成垂直排列，修正在深色模式字體顏色和背景太接近，所有玩家的資訊view往中間靠
- [x] 調整玩家的資訊view，風的顏色換掉，分數的字體放大2倍
- [x] 骰子改成是3顆，引用 assets 的圖片 dice 1 ~ 6 ✅ 2026-02-10
- [x] 調整 game_play 的佈局：電腦版的佈局在手機垂直檢視會跑版，主要是字體沒有自適應、玩家卡片會蓋住中間的功能按鈕 ✅ 2026-02-10
- [x] 設定莊家並重新計算風和圈的功能應該是讓東的位置動態的跟著重設的莊家，現在固定在右邊是錯誤的 ✅ 2026-02-10
---

## 📊 當前狀態

**版本**：v2.0.0
**已部署**：✅ https://paika-13250.web.app
**GitHub**：✅ https://github.com/Johndgnzj/paika-flutter

**接下來開發**：v3.0.0 雲端同步與資料管理

---

*最後更新：2026-02-12*
